;
; Custom PHP Settings for Production

; =========================================================
; 1. RESOURCE MANAGEMENT
; =========================================================

; Maximum amount of memory a script may consume.
memory_limit = 256M

; Maximum execution time of each script, in seconds
max_execution_time = 60


; =========================================================
; 2. ERROR & LOGGING
; =========================================================

error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT
display_errors = Off     ; CRITICAL: Never show errors to the public
log_errors = On          ; CRITICAL: Always log errors to the specified path
error_log = /var/log/php_errors.log


; =========================================================
; 3. UPLOADS & FILES
; =========================================================

post_max_size = 16M
upload_max_filesize = 16M
max_file_uploads = 20


; =========================================================
; 4. SECURITY & SESSIONS
; =========================================================

; Ensures cookies are only sent over HTTPS
session.cookie_secure = 1
session.use_strict_mode = 1
session.use_only_cookies = 1


; =========================================================
; 5. OPCACHE (PERFORMANCE)
; =========================================================

opcache.enable = 1
opcache.enable_cli = 1
; The amount of memory to use for the opcode cache. 256MB is a good starting point.
opcache.memory_consumption = 256
; How often to check the timestamp of the PHP files for updates (0 = never check, ideal for immutable containers)
opcache.validate_timestamps = 0
; Cache the compiled PHP files even after the PHP-FPM process restarts.
opcache.interned_strings_buffer = 16
